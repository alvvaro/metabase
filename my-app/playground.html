<script
  src="http://localhost:3000/app/embed.js"
  data-metabase-instance-url="http://localhost:3000"
  data-metabase-use-existing-user-session="true"
></script>

<metabase-config
  instance-url="http://localhost:3000"
  use-existing-user-session="true"
></metabase-config>

<script>
  const { defineMetabaseConfig } = window["metabase.embed"];
  defineMetabaseConfig({
    target: "#metabase-embed",
    instanceUrl: "http://localhost:3000",
  });
</script>

<h1>new code</h1>
<textarea type="text" id="theme" rows="10" cols="100">
{"colors": {"brand": "blue"}}
</textarea>
<br />
<button id="change-theme">change theme</button>
<button id="change-theme-as-json">change theme as json</button>
<br />
<textarea type="text" id="initial-parameters" rows="10" cols="100">
{"vendor": "value_1", "param_2": "value_2"}
</textarea>
<br />
<button id="change-initial-parameters">change initial parameters</button>

<br />
<metabase-dashboard
  id="metabase-embed"
  dashboard-id="1"
  initial-parameters='{"vendor": "value_1", "param_2": "value_2"}'
  theme='{"colors": {"brand": "red"}}'
>
</metabase-dashboard>

<script>
  document.getElementById("change-theme").addEventListener("click", () => {
    const theme = document.getElementById("theme").value;
    console.log("theme", theme);
    const embed = document.getElementById("metabase-embed");
    embed.setAttribute("theme", theme);
    console.log("setting theme", theme);
  });
  document
    .getElementById("change-initial-parameters")
    .addEventListener("click", () => {
      const initialParameters =
        document.getElementById("initial-parameters").value;
      const embed = document.getElementById("metabase-embed");
      embed.setAttribute("initial-parameters", initialParameters);
      console.log("setting initial parameters", initialParameters);
    });
  document
    .getElementById("change-theme-as-json")
    .addEventListener("click", () => {
      const theme = JSON.parse(document.getElementById("theme").value);
      console.log("theme", theme);
      const embed = document.getElementById("metabase-embed");
      // this calls theme.toString() which returns [object Object]
      // we can probably add a warning if an attribute is set to that specific string, telling them to use .theme={xx}
      // embed.setAttribute("theme", theme);
      embed.theme = theme;
      console.log("setting theme", theme);
    });
</script>

<h1>old code</h1>
<div id="embed-container1"></div>

<div id="metabase-embed"></div>

<script>
  const { MetabaseEmbed } = window["metabase.embed"];

  // const embed = new MetabaseEmbed({
  //   target: "#metabase-embed",
  //   instanceUrl: "http://localhost:3000",
  //   dashboardId: 1,
  //   isDrillThroughEnabled: true,
  //   withDownloads: false,
  //   withTitle: true,
  //   initialParameters: {
  //     vendor: "example",
  //   },
  //   useExistingUserSession: true,
  // });
</script>
<!--
<script>
  // initMetabaseSdk({
  //   instanceUrl: "http://localhost:3000",
  //   useExistingUserSession: true,
  //   theme: {
  //     colors: {
  //       brand: "#FF0000",
  //     },
  //   },
  // });
</script>

<metabase-question question-id="1" id="my-mb-embed"> </metabase-question>
<metabase-question question-id="2"> </metabase-question>

<metabase-question
  question-id="a"
  initial-parameters="['vendor', 'param_2']"
  with-title="false"
/>

.initialParameters=['vendor', 'param_2']

<script></script> -->

<!-- <metabase-config
  instance-url="http://localhost:3000"
  use-existing-user-session="true"
>


  <metabase-config theme="dark">
    <metabase-dashboard dashboard-id="1" id="my-mb-embed" />
  </metabase-config>
</metabase-config>

 <metabase-dashboard dashboard-id="1" /> -->

<!-- <metabase-dashboard dashboard-id="1" with-title="false" /> -->

<!-- <button id="my-mb-embed-button">Click me</button>

<script>
  document
    .getElementById("my-mb-embed-button")
    .addEventListener("click", () => {
      const embed = document.getElementById("my-mb-embed");
      embed.setAttribute("dashboard-id", 2);
    });
</script> -->
<!-- <script>
  window.color = "FF0000";
</script>

<metabase-theme> { "colors": { "brand": window.color } } </metabase-theme>

<div>
  <h1>hello</h1>

  <button id="my-mb-embed-button">Click me</button>
</div> -->
